{% extends 'student/base.html' %}
{% block body %}

<style type="text/css">
    .unit_without_prerequisite {
    color: green;
    }

    .unit_with_prerequisite {
        color: red;
    }
</style>


<script type="text/javascript">
	function moving_with_prerequisite() {
		var content = document.getElementById("ToSelectUnit").innerHTML;
		    document.getElementById("SelectedUnits").innerHTML = content;
	}

	function Unit_PreRequisite_Info(radio_button_id, selected_unit_code, selected_unit_name) {
		var pre_requisite_info = '{{ pre_requisite_units }}';
		var code = [];
		var pre_requisite_code = "";
		var pre_requisite_name = "";
		{% for pre_requisite_unit in pre_requisite_units %}
			code.push('{{ pre_requisite_unit.UnitCode }}');
		{% endfor %}
		var pop_up_msg = "Selected Unit \n" + selected_unit_name + "-" + selected_unit_code + "\n" + "No pre-requisite required";
		for(each_code in code){
			if(selected_unit_code == code[each_code]){
				{% for pre_requisite_unit in pre_requisite_units %}
					if(selected_unit_code =='{{ pre_requisite_unit.UnitCode }}'){
						pre_requisite_code = '{{ pre_requisite_unit.PreRequisiteCode }}';
						{% for unit in units %}
							if(pre_requisite_code == '{{ unit.UnitCode }}' ){
								pre_requisite_name = pre_requisite_name + "\n" + ('{{ unit.UnitName }}');
							}
						{% endfor %}
					}
				{% endfor %}
			pop_up_msg = "Selected Unit \n" + selected_unit_name + "-" + selected_unit_code + "\n" + "Following pre-requisite are required "+ pre_requisite_name+ "\n" + "Confirm that you have passed these units";
			break;
			}
		}
		var pop_up_result = confirm(pop_up_msg);
		if (pop_up_result == false){
			radio_button_id.checked = false;
			var pop_up = confirm(radio_button_id.checked);
		}
	}
</script>
<div class="row" id="features">
	<div class="col-sm-6 features" id="SelectedUnits">
        <form action="{% url 'student:final_study_plan' course_field course_code %}" method="post">
            {% csrf_token %}
            {% if error_message %}
                <p><strong>{{ error_message }}</strong></p>
            {% endif %}
            {% for unit in unit_for_div %}
                {% if unit.PreRequisite %}
                    <div class="unit_with_prerequisite">
                        {{ unit.UnitName }} - {{ unit.UnitCode }} <br>
                    </div><!--- end "unit_with_prerequisite" --->
                {% else %}
                    <div class="unit_without_prerequisite" >
                        {{ unit.UnitName }} - {{ unit.UnitCode }} <br>
                    </div><!--- end "unit_without_prerequisite" --->
                {% endif %}
            {% endfor %}
            <br><br><br><br><br>
            <div class="final_study_plan_buttons" >
                <input type="submit" value="Final Study Plan">
            </div><!--- end final_study_plan_buttons --->
        </form>
	</div><!--- end SelectedUnits--->
	<div class="col-sm-6 features" id="ToSelectUnit">
        <strong><p>List of Units For {{ course_code }}</p></strong>
		<form action="{% url 'student:check_prerequisite' course_field course_code %}" method="post">
			{% csrf_token %}
			{% for unit in units %}
                <div class="unit_radio_button">
					<input type="radio" id="unit{{ forloop.counter }}" name="unit" value="{{ unit.UnitCode }}" onclick="Unit_PreRequisite_Info('unit{{ forloop.counter }}', '{{ unit.UnitCode }}', '{{ unit.UnitName }}')" />
					<label for="unit{{ forloop.counter }}">
						{{ unit.UnitName}} - {{ unit.UnitCode }}
					</label><br>
				</div><!--- end "unit_radio_button" --->
			{% endfor %}
			<input type="submit" value="Add" >
		</form><!---end form--->
	</div><!--- end ToSelectUnit--->
</div><!--- end features--->
{% endblock %}






























